namespace = HKRC

#Dancing Rope
character_event = {
	id = HKRC.0
	desc = "HKRC0_DESC"
	picture = GFX_evt_jugglers

	min_age = 20
	capable_only = yes
	prisoner = no
	only_rulers = yes

	trigger = {
		has_character_modifier = holding_light_fair
		capital_scope = {
			NOT = { has_province_modifier = peasants_upset }
		}
		
		OR = {
			NOT = { has_character_flag = lf_event_happened }
			had_character_flag = {
				flag = lf_event_happened
				days = 3
			}
		}

		had_character_flag = {
			flag = light_fair_begin
			days = 3
		}
		NOT = { has_character_flag = lf_event_0 }
	}
	
	immediate = {
		set_character_flag = lf_event_happened
		set_character_flag = lf_event_0
	}		

	mean_time_to_happen = {
		days = 180
		
		modifier = {
			factor = 0.33
			NOT = { has_character_flag = lf_event_happened }
		}	
		
		modifier = {
			factor = 1.5
			has_character_flag = lf_event_happened
		}			

		modifier = {
			factor = 0.5
			trait = charitable
		}
		modifier = {
			factor = 2
			trait = greedy
		}	
	}


	option = {
		name = "HKRC0A"
		trigger = {
			NOT = {
				trait = kind
				trait = charitable
				trait = honest
			}
		}
		random = {
			chance = 10
			add_trait = stressed
			hidden_tooltip = {
				character_event = {
					id = 38282 #Notify Stressed
				}
			}
		}
	}

	option = {
		name = "HKRC0B"
		trigger = {
			OR = {
				trait = kind
				trait = charitable
				trait = honest
			}
			any_vassal = {
				OR = {
					trait = kind
					trait = charitable
					trait = honest
				}
			}
		}
		random_vassal = {
			limit = {
				OR = {
					trait = kind
					trait = charitable
					trait = honest
				}
			}
			opinion = {
				modifier = honest_pos
				who = ROOT
				years = 5
			}
		}
	}

	option = {
		name = "HKRC0C"
		trigger = {
			trait = arbitrary
		}
		capital_scope = {
			add_province_modifier = {
				name = peasants_upset
				duration = 365
			}
		}
	}

	option = {
		name = "HKRC0D"
		prestige = 5
		treasury = -5
	}
}

#Archery 1
character_event = {
	id = HKRC.1
	desc = "EVTDESC74005"
	picture = GFX_evt_jugglers

	min_age = 20
	capable_only = yes
	prisoner = no
	only_rulers = yes

	trigger = {
		any_vassal = {
			age = 20
		}
		capital_scope = {
			NOT = { has_province_modifier = peasants_upset }
		}
		NOT = { trait = paranoid }
		
		OR = {
			NOT = { has_character_flag = lf_event_happened }
			had_character_flag = {
				flag = lf_event_happened
				days = 3
			}
		}			

		has_character_modifier = holding_light_fair
		had_character_flag = {
			flag = light_fair_begin
			days = 3
		}
		NOT = { has_character_flag = lf_event_1 }	
	}
	
	immediate = {
		set_character_flag = lf_event_happened
		set_character_flag = lf_event_1
	}	

	mean_time_to_happen = {
		days = 180
		
		modifier = {
			factor = 0.33
			NOT = { has_character_flag = lf_event_happened }
		}	
		
		modifier = {
			factor = 1.5
			has_character_flag = lf_event_happened
		}			

		modifier = {
			factor = 0.75
			trait = arbitrary
		}

		modifier = {
			factor = 2.5
			trait = gregarious
		}
	}

	option = {
		name = "EVTOPTA74005"
		trigger = {
			NOT = { trait = trusting }
			NOT = { trait = paranoid }
		}
		add_trait = paranoid
	}

	option = {
		name = "EVTOPTC74005"
		trigger = {
			NOT = { trait = charitable }
		}
		capital_scope = {
			add_province_modifier = {
				name = peasants_upset
				duration = 365
			}
		}
	}

	option = {
		name = "EVTOPTD74005"
		trigger = {
			NOT = { trait = greedy }
		}
		random_vassal = {
			limit = {
				age = 20
			}
			opinion = {
				modifier = charitable_pos
				who = ROOT
				years = 5
			}
		}
		wealth = -5
	}
}

#Jesters 2
character_event = {
	id = HKRC.2
	desc = "EVTDESC74010"
	picture = GFX_evt_jugglers

	min_age = 20
	capable_only = yes
	prisoner = no
	only_rulers = yes
	

	trigger = {
		capital_scope = {
			NOT = { has_province_modifier = peasants_upset }
		}
		
		OR = {
			NOT = { has_character_flag = lf_event_happened }
			had_character_flag = {
				flag = lf_event_happened
				days = 3
			}
		}			
		has_character_modifier = holding_light_fair
		had_character_flag = {
			flag = light_fair_begin
			days = 3
		}
		NOT = { has_character_flag = lf_event_2 }
	}
	
	immediate = {
		set_character_flag = lf_event_happened
		set_character_flag = lf_event_2
	}	

	mean_time_to_happen = {
		days = 180
		
		modifier = {
			factor = 0.33
			NOT = { has_character_flag = lf_event_happened }
		}	
		
		modifier = {
			factor = 1.5
			has_character_flag = lf_event_happened
		}			

		modifier = {
			factor = 3
			trait = wroth
		}

		modifier = {
			factor = 0.8
			trait = kind
		}

		modifier = {
			factor = 0.75
			trait = gregarious
		}
	}

	option = {
		name = "EVTOPTA74010"
		trigger = {
			NOT = {
				trait = wroth
				trait = cruel
			}
		}
		prestige = 5
	}

	option = {
		name = "EVTOPTE74010"
		trigger = {
			OR = {
				trait = wroth
				trait = cruel
			}
		}
		capital_scope = {
			add_province_modifier = {
				name = peasants_upset
				duration = 365
			}
		}
	}

	option = {
		name = "EVTOPTG74010"
		trigger = {
			trait = charitable
			NOT = {
				trait = wroth
				trait = cruel
			}
		}
		treasury = -10
		prestige = 10
	}
}

#Strolling Players 3
character_event = {
	id = HKRC.3
	desc = "EVTDESC74025"
	picture = GFX_evt_jugglers

	min_age = 20
	capable_only = yes
	prisoner = no
	only_rulers = yes
	is_married = yes

	trigger = {
		learning = 10
		any_vassal = {
			learning = 10
			age = 20
		}
		capital_scope = {
			NOT = { has_province_modifier = peasants_upset }
		}
		
		OR = {
			NOT = { has_character_flag = lf_event_happened }
			had_character_flag = {
				flag = lf_event_happened
				days = 3
			}
		}			

		has_character_modifier = holding_light_fair
		had_character_flag = {
			flag = light_fair_begin
			days = 3
		}
		NOT = { has_character_flag = lf_event_3 }
	}
	
	immediate = {
		set_character_flag = lf_event_happened
		set_character_flag = lf_event_3
	}	

	mean_time_to_happen = {
		days = 180
		
		modifier = {
			factor = 0.33
			NOT = { has_character_flag = lf_event_happened }
		}	
		
		modifier = {
			factor = 1.5
			has_character_flag = lf_event_happened
		}	
		
		modifier = {
			factor = 0.75
			trait = gregarious
		}

		modifier = {
			factor = 2.5
			trait = charitable
		}
	}

	option = {
		name = "EVTOPTA74025"
		random_vassal = {
			limit = {
				learning = 10
				is_adult = yes
			}
			opinion = {
				modifier = opinion_approves
				who = ROOT
				years = 5
			}
		}
	}

	option = {
		name = "EVTOPTB74025"
		trigger = {
			NOT = { has_character_flag = learning_boost_fair }
		}
		change_learning = 1
		set_character_flag = learning_boost_fair
	}

	option = {
		name = "EVTOPTD74025"
		spouse = {
			opinion = {
				modifier = opinion_delighted
				who = ROOT
				years = 5
			}
		}
	}
}


#Errant monk disturbing the fair 7
character_event = {
	id = HKRC.7
	desc = "EVTDESC74042"
	picture = GFX_evt_jugglers

	min_age = 20
	capable_only = yes
	prisoner = no
	only_rulers = yes

	trigger = {
		any_vassal = {
			is_priest = yes
		}
		capital_scope = {
			NOT = { has_province_modifier = peasants_upset }
		}
		
		OR = {
			NOT = { has_character_flag = lf_event_happened }
			had_character_flag = {
				flag = lf_event_happened
				days = 3
			}
		}			

		has_character_modifier = holding_light_fair
		had_character_flag = {
			flag = light_fair_begin
			days = 3
		}
		NOT = { has_character_flag = lf_event_74042 }
	}
	
	immediate = {
		set_character_flag = lf_event_happened
		set_character_flag = lf_event_74042
	}	

	mean_time_to_happen = {
		days = 240
		
		modifier = {
			factor = 0.33
			NOT = { has_character_flag = lf_event_happened }
		}	
		
		modifier = {
			factor = 1.5
			has_character_flag = lf_event_happened
		}			
	}

	option = {
		name = "EVTOPTA74042" #Allow him
		trigger = {
			NOT = { trait = zealous }
		}
		piety = -5
		random_vassal = {
			limit = {
				is_priest = yes
			}
			opinion = {
				modifier = opinion_irritated
				who = ROOT
				years = 5
			}
		}
	}
	option = {
		name = "EVTOPTB74042" #Banish him
		piety = 10
		capital_scope = {
			add_province_modifier = {
				name = peasants_upset
				duration = 365
			}
		}
	}
}

#Auctioneer are arrested by Marshal for selling fake goods 8
character_event = {
	id = 8
	desc = "HKRC8_DESC"
	picture = GFX_evt_market

	min_age = 20
	capable_only = yes
	prisoner = no
	only_rulers = yes

	trigger = {
		job_marshal = {
			martial = 12
		}
		any_demesne_province = {
			is_capital = yes
			NOT = {
				has_province_modifier = public_execution
			}
		}
		
		OR = {
			NOT = { has_character_flag = lf_event_happened }
			had_character_flag = {
				flag = lf_event_happened
				days = 3
			}
		}			

		has_character_modifier = holding_light_fair
		had_character_flag = {
			flag = light_fair_begin
			days = 3
		}
		NOT = { has_character_flag = lf_event_8 }	
	}
	
	immediate = {
		set_character_flag = lf_event_happened
		set_character_flag = lf_event_8
	}	

	mean_time_to_happen = {
		days = 180
		
		modifier = {
			factor = 0.33
			NOT = { has_character_flag = lf_event_happened }
		}	
		
		modifier = {
			factor = 1.5
			has_character_flag = lf_event_happened
		}			
	}

	option = {
		name = "EVTOPTA74044"
		random_demesne_province = {
			limit = {
				is_capital = yes
			}
			add_province_modifier = {
				name = public_execution
				duration = 1825
			}
		}
		random = {
			chance = 25

			add_trait = cruel
			hidden_tooltip = {
				character_event = {
					id = 38259 #Notify Cruel
				}
			}
		}
	}
	option = {
		name = "EVTOPTB74044"
		treasury = 5
	}
}

#The light Fair is over 9
character_event = {
	id = HKRC.9
	desc = "HKRC9_DESC"
	picture = GFX_evt_market

	is_triggered_only = yes

	option = {
		name = "HKRC9A"
		remove_character_modifier = holding_light_fair
		clr_character_flag = do_not_disturb
		clr_character_flag = lf_event_happened
		clr_character_flag = light_fair_begin
		set_character_flag = recent_light_fair
		clr_character_flag = lf_event_0
		clr_character_flag = lf_event_1
		clr_character_flag = lf_event_2
		clr_character_flag = lf_event_3
		clr_character_flag = lf_event_8
		clr_character_flag = lf_event_11
		clr_character_flag = lf_event_12
		prestige = 10
	}
}

character_event = {
	id = HKRC.10
	desc = "HKRC10_DESC"
	picture = GFX_evt_jugglers
	
	is_triggered_only = yes
	
	immediate = {
		set_character_flag = light_fair_begin
	}

	option = {
		name = "HKRC10"
	}
}

#story 11
character_event = {
	id = HKRC.11
	desc = "HKRC11_DESC"
	picture = GFX_evt_jugglers

	only_playable = yes
	capable_only = yes
	prisoner = no
	war = no
	has_character_flag = light_fair_begin

	trigger = {
		in_command = no
		any_vassal = {
			war = no
			prisoner = no
			age = 50
			reverse_opinion = { who = ROOT value = 20 }
		}
		
		OR = {
			NOT = { has_character_flag = lf_event_happened }
			had_character_flag = {
				flag = lf_event_happened
				days = 3
			}
		}

		has_character_modifier = holding_light_fair
		had_character_flag = {
			flag = light_fair_begin
			days = 3
		}
		NOT = { has_character_flag = lf_event_11 }
	}
	
	immediate = {
		set_character_flag = lf_event_happened
		set_character_flag = lf_event_11
	}	

	mean_time_to_happen = {
		days = 200
		
		modifier = {
			factor = 0.33
			NOT = { has_character_flag = lf_event_happened }
		}	
		
		modifier = {
			factor = 1.5
			has_character_flag = lf_event_happened
		}			
	}

	option = {
		name = "HKRC11A"
		trigger = {
			NOT = { trait = gregarious }
		}
		random_vassal = {
			limit = {
				war = no
				prisoner = no
				is_adult = yes
				reverse_opinion = {
					who = ROOT
					value = 20
				}
			}
			opinion = {
				modifier = opinion_relieved
				who = ROOT
				years = 5
			}
		}
	}
	option = {
		name = "HKRC11B"
		prestige=20
		trigger = {
			OR = {
				trait = quick
				trait = shrewd
				trait = genius
			}
			NOT = { trait = shy }
		}
		random_vassal = {
			limit = {
				war = no
				prisoner = no
				is_adult = yes
				reverse_opinion = {
					who = ROOT
					value = 20
				}
			}
			opinion = {				
				modifier = gregarious_pos
				who = ROOT
				years = 5
			}
		}
	}
	option = {
		name = "HKRC11C"
		prestige=20
		trigger = {
			OR = {
				trait = robust
				trait = strong
			}
			NOR = {
				trait = race_goron
				trait = race_subrosian
				trait = shy
			}
		}
		random_vassal = {
			limit = {
				war = no
				prisoner = no
				is_adult = yes
				reverse_opinion = {
					who = ROOT
					value = 20
				}
			}
			opinion = {				
				modifier = gregarious_pos
				who = ROOT
				years = 5
			}
		}
	}
}

#Jumping Jews of Jerusalem
character_event = {
	id = HKRC.12
	desc = "HKRC12_DESC"
	picture = GFX_evt_jugglers

	min_age = 20
	capable_only = yes
	prisoner = no
	only_rulers = yes

	trigger = {
		any_vassal = {
			trait = gregarious
		}
		capital_scope = {
			NOT = { has_province_modifier = peasants_upset }
		}
		
		OR = {
			NOT = { has_character_flag = fair_event_happened }
			had_character_flag = {
				flag = fair_event_happened
				days = 3
			}
		}			

		has_character_modifier = holding_summer_fair
		had_character_flag = {
			flag = summer_fair_begin
			days = 3
		}
		NOT = { has_character_flag = fair_event_12 }
	}
	
	immediate = {
		set_character_flag = fair_event_happened
		set_character_flag = fair_event_12
	}	

	mean_time_to_happen = {
		days = 360
		
		modifier = {
			factor = 0.33
			NOT = { has_character_flag = fair_event_happened }
		}	
		
		modifier = {
			factor = 1.5
			has_character_flag = fair_event_happened
		}			

		modifier = {
			factor = 0.5
			trait = gregarious
		}

		modifier = {
			factor = 1.5
			trait = shy
		}
	}

	option = {
		name = "EVTOPTA74035"
		trigger = {
			NOT = { trait = gregarious }
		}
		treasury = 5
		random_vassal = {
			limit = {
				trait = gregarious
			}
			opinion = {
				modifier = opinion_disgruntled
				who = ROOT
				years = 5
			}
		}
	}

	option = {
		name = "EVTOPTB74035"
		trigger = {
			NOT = { trait = gregarious }
			OR = {
				trait = wroth
				trait = cruel
			}
		}
		capital_scope = {
			add_province_modifier = {
				name = peasants_upset
				duration = 365
			}
		}
	}

	option = {
		name = "EVTOPTC74035"
		if = {
			limit = {
				NOT = { trait = gregarious }
			}
			random = {
				chance = 25
				add_trait = gregarious
				hidden_tooltip = {
					character_event = {
						id = 38265 #Notify Gregarious
					}
				}
			}
		}
		random_vassal = {
			limit = {
				trait = gregarious
			}
			opinion = {
				modifier = opinion_approves
				who = ROOT
				years = 5
			}
		}
	}
}